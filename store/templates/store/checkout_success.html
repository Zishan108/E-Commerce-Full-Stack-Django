{% extends 'store/base.html' %}

{% block title %}Checkout Success{% endblock %}

{% block content %}
<div class="container-fluid px-0">
    <div class="alert alert-success">
        <h2 class="mb-3">Thank you for your purchase!</h2>
        <p class="mb-2">Your order <strong>#{{ order.order_id|default:order.id }}</strong> has been successfully placed.</p>
        
        <div class="mt-3">
            <strong>Order Status:</strong> 
            <span class="badge 
                {% if order.status == 'pending' %}bg-secondary
                {% elif order.status == 'confirmed' %}bg-primary
                {% elif order.status == 'shipped' %}bg-info
                {% elif order.status == 'delivered' %}bg-success
                {% elif order.status == 'cancelled' %}bg-danger
                {% else %}bg-secondary{% endif %} fs-6">
                {{ order.get_status_display }}
            </span>
        </div>
    </div>

    {% if order.items.all %}
    <h4 class="mt-4">Order Summary:</h4>
    <div class="table-responsive">
        <table class="table table-bordered mt-2">
            <thead class="table-light">
                <tr>
                    <th>Product</th>
                    <th>Price</th>
                    <th>Quantity</th>
                    <th>Total</th>
                </tr>
            </thead>
            <tbody>
                {% for item in order.items.all %}
                <tr>
                    <td>{{ item.product.name }}</td>
                    <td>₹{{ item.price }}</td>
                    <td>{{ item.quantity }}</td>
                    <td>₹{{ item.total_price }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <h4 class="mt-3">Total Paid: ₹{{ total }}</h4>
    {% endif %}

    <div class="mt-4 d-grid gap-2 d-md-block">
        <a href="{% url 'store:home' %}" class="btn btn-primary mb-2 w-100 w-md-auto">Continue Shopping</a>
        <a href="{% url 'store:order_history' %}" class="btn btn-outline-secondary mb-2 w-100 w-md-auto">View Order History</a>
    </div>
</div>
{% endblock %}